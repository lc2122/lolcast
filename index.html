<!DOCTYPE html>
<html>
<head>
<title>Iframe 및 HLS Player</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<style>
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #videoContainer {
    width: 640px;
    height: 360px;
    border: 1px solid black;
  }
</style>
</head>
<body>
  <div class="container">
    <h1>Iframe 및 HLS Player</h1>
    <input type="text" id="addressInput" placeholder="주소를 입력하세요">
    <button id="playButton">재생</button>
    <div id="videoContainer"></div>
  </div>

  <script>
    const addressInput = document.getElementById('addressInput');
    const playButton = document.getElementById('playButton');
    const videoContainer = document.getElementById('videoContainer');

    playButton.addEventListener('click', () => {
      const address = addressInput.value.trim();
      videoContainer.innerHTML = ''; // 이전 내용 삭제

      if (address.endsWith('.m3u8')) {
        // HLS 플레이어 설정
        const video = document.createElement('video');
        video.controls = true;
        videoContainer.appendChild(video);

        if (Hls.isSupported()) {
          const hls = new Hls();
          hls.loadSource(address);
          hls.attachMedia(video);
          hls.on(Hls.Events.MANIFEST_PARSED, () => {
            video.play();
          });
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = address;
          video.addEventListener('loadedmetadata', () => {
            video.play();
          });
        }
      } else {
        // Iframe 생성
        const iframe = document.createElement('iframe');
        iframe.width = '100%';
        iframe.height = '100%';
        iframe.src = address;
        videoContainer.appendChild(iframe);
      }
    });
  </script>
</body>
</html>
