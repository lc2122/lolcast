<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>단축 URL 영상 재생</title> <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script> </head> <body> <input type="text" id="shortUrl" placeholder="단축 URL을 입력하세요"> <button onclick="playOriginalUrl()">재생</button> <video id="videoPlayer" controls></video> <script> function playOriginalUrl() { var shortUrl = document.getElementById("shortUrl").value; // AJAX 요청을 통해 서버에 단축 URL을 보내어 원래 URL을 받아옵니다. var xhr = new XMLHttpRequest(); xhr.onreadystatechange = function () { if (xhr.readyState === 4 && xhr.status === 200) { var originalUrl = xhr.responseText; var videoPlayer = document.getElementById("videoPlayer"); if (Hls.isSupported()) { var hls = new Hls(); hls.loadSource(originalUrl); hls.attachMedia(videoPlayer); hls.on(Hls.Events.MANIFEST_PARSED, function () { videoPlayer.play(); }); } else { videoPlayer.src = originalUrl; videoPlayer.play(); } } }; xhr.open("GET", "convertUrl.php?url=" + shortUrl); xhr.send(); } </script> </body> </html>
